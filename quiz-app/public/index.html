<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8">

<title>Vanilla Quiz</title>

<!-- Mobile-friendly viewport -->
<meta name="viewport" content="width=device-width, initial-scale=1.0">
    
</head>
<body>
 <form name="quiz-form">
  <div id="quiz"></div>

  <input type="submit" value="See Results" />
 </form>

 <div id="results">
 </div>

<script>
 var quizForm = document.forms['quiz-form'];
 var quiz = document.getElementById('quiz');
 var results = document.getElementById('results');

 // consider builder for quizData
 var quizData = [
  { 
   question: "What the respond code for success", 
   choices: { a:"200", b:"400", c:"500"}, 
   answer: "a"
  },
  { 
   question: "What does a 502 mean?", 
   choices: { a:"Unavailable", b:"Unauthorized", c:"Bad Gateway"}, 
   answer: "c"
  },
  { 
   question: "How do you center text in a div?", 
   choices: { a:"Text-center", b:"Text-align", c:"Text-justify"}, 
   answer: "b"
  }
 ];

 // render quiz as soon as the page loads
 renderQuiz();

 function renderQuiz() {
  var viewUpdate = buildView();
  quiz.innerHTML = viewUpdate;
 }

 function buildView() {
   var tempView = [];

   // Array.forEach tends to be slower
   // than the for() loop used here
   for (var i=0;i<quizData.length;i++) {
    var currentQues = quizData[i];
    var choicePos = i + 1
    var choices = [];

   for (choice in currentQues.choices) {     
     choices.push(
       `<label>
         <input type="radio" name="choice${i}" value="${choice}" />
         ${choice} : ${currentQues.choices[choice]}
       </label>`
     );
   }

    tempView.push(
     `
     <fieldset>
      <legend>${choicePos} ${currentQues.question}</legend>
      <div class="choices">
       <p>${choices.join('')}
      </div>
     </fieldset>     
     `
    );
   }

  return tempView.join('');
 }

 quizForm.onsubmit = function(evt) {
  evt.preventDefault();
  var choiceDivs = quiz.querySelectorAll('.choices');
  var userChoices = [];

  // gather user choices
  for (var i=0;i<quizData.length;i++) {
   const temp = choiceDivs[i];
   const selector = `input[name=choice${i}]:checked`;      
   const userChoice = (temp.querySelector(selector) || {}).value;
   const userChoiceText = quizData[i].choices[userChoice];
   userChoices.push(
    `
    <p>
    ${userChoiceText}
    </p>
    `
   );
  }

  results.innerHTML = userChoices.join('');  
  
 }

</script>
</body>
</html>